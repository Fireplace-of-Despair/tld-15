@page
@using Common.Composition
@using TLD15.Pages.Shared.Components.BrandHeader
@using TLD15.Pages.Shared.Components.NavigationAdmin
@using TLD15.Pages.Shared.Components.NavigationGlobal
@using TLD15.Pages.Shared.Components.NavigationLocal
@using TLD15.Utils
@model IndexModel;

@{
    ViewData[Globals.Page.Title] = $"{IndexModel.MetaPublic.Title} | {Globals.Brand.Slogan}";
    ViewData[Globals.Page.Description] = Globals.Brand.Description;

    ViewData[Globals.OpenGraph.Url] = Model.Host.TrimLast('/') + ViewContext.HttpContext.Request.Path;
    ViewData[Globals.OpenGraph.Image] = $"{Model.Host}logo.png";
    ViewData[Globals.OpenGraph.Locale] = Globals.Settings.Locale;
}

@await Component.InvokeAsync(nameof(NavigationLocal), new Dictionary<string, string>()
{
    // { TLD15.Pages.Introduction.PreviewIntroductionPartialModel.Id, "Introduction" },
    { TLD15.Pages.Lore.PreviewLoreModel.MetaPublic.Id, TLD15.Pages.Lore.PreviewLoreModel.MetaPublic.Title },
    { TLD15.Pages.Articles.PreviewArticlesPartialModel.MetaPublic.Id, TLD15.Pages.Articles.PreviewArticlesPartialModel.MetaPublic.Title },
    { TLD15.Pages.Projects.PreviewPartialModel.MetaPublic.Id, TLD15.Pages.Projects.PreviewPartialModel.MetaPublic.Title },
    { TLD15.Pages.Social.PreviewSocialPartialModel.MetaPublic.Id, TLD15.Pages.Social.PreviewSocialPartialModel.MetaPublic.Title },
    { TLD15.Pages.Contacts.PreviewContactsPartialModel.MetaPublic.Id, TLD15.Pages.Contacts.PreviewContactsPartialModel.MetaPublic.Title },
})

@* @{
    await Html.RenderPartialAsync("/Pages/Introduction/PreviewIntroductionPartial.cshtml",
        await TLD15.Pages.Introduction.PreviewIntroductionPartialModel.InitializeAsync(Model.Mediator));
} *@

@{
    await Html.RenderPartialAsync("/Pages/Lore/PreviewLorePartial.cshtml",
        await TLD15.Pages.Lore.PreviewLoreModel.InitializeAsync(Model.Mediator));
}

@{
    await Html.RenderPartialAsync("/Pages/Articles/PreviewPartial.cshtml",
        await TLD15.Pages.Articles.PreviewArticlesPartialModel.InitializeAsync(Model.Mediator));
}

@{
    await Html.RenderPartialAsync("/Pages/Projects/PreviewPartial.cshtml",
        await TLD15.Pages.Projects.PreviewPartialModel.InitializeAsync(Model.Mediator));
}

@{
    await Html.RenderPartialAsync("/Pages/Social/PreviewSocialPartial.cshtml",
        await TLD15.Pages.Social.PreviewSocialPartialModel.InitializeAsync(Model.Mediator));
}

@{
    await Html.RenderPartialAsync("/Pages/Contacts/PreviewContactsPartial.cshtml",
        await TLD15.Pages.Contacts.PreviewContactsPartialModel.InitializeAsync(Model.Mediator));
}